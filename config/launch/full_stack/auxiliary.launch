<launch>
    <!-- Adapters -->
    <node pkg="zzz_driver_simulators_carla_adapter" type="convert_topic" name="convert_map" output="screen">
        <param name="input_topic" value="/carla/world_info" />
        <param name="output_topic" value="/zzz/navigation/static_map" />
        <param name="msg_type" value="CarlaWorldInfo" />
    </node>
    <node pkg="zzz_driver_simulators_carla_adapter" type="convert_topic" name="convert_command" output="screen">
        <param name="input_topic" value="/zzz/control/command" />
        <param name="output_topic" value="/carla/ego_vehicle/vehicle_control_cmd" />
        <param name="msg_type" value="ControlCommand" />
    </node>
    <node pkg="zzz_driver_simulators_carla_adapter" type="convert_topic" name="convert_objects" output="screen">
        <param name="input_topic" value="/carla/ego_vehicle/objects" />
        <param name="output_topic" value="/zzz/perception/objects_truth" />
        <param name="msg_type" value="ObjectArray" />
    </node>

    <!-- Benchmarking -->
    <node pkg="zzz_driver_datasets_benchmark" type="tracking" name="perception_benchmark" output="screen">
        <param name="ground_truth_topic" value="/zzz/perception/objects_truth"/>
    </node>

    <!-- Visualization -->
    <node pkg="zzz_visualization_web_dash" type="dashboard" name="dashboard">
    </node>
    <node pkg="zzz_visualization_rviz_box_visualizer" type="detection2d"
          name="dbox_visualize_img" output="screen" ns="/zzz/perception">
        <param name="input_topic" value="objects2d_detected"/>
        <param name="image_topic" value="/carla/ego_vehicle/camera/rgb/Center/image_color"/>
    </node>
    <node pkg="zzz_visualization_rviz_box_visualizer" type="detection"
          name="dbox_visualize" output="screen" ns="/zzz/perception">
        <param name="input_topic" value="objects_detected_pseudo"/>
        <param name="marker_lifetime" value="0.5"/>
        <param name="box_max_size" value="9999999"/>
    </node>
    <node pkg="zzz_visualization_rviz_box_visualizer" type="tracking"
          name="box_visualize" output="screen" ns="/zzz/perception">
        <param name="input_topic" value="objects_tracked"/>
        <param name="output_topic" value="carla/debug_marker"/>
        <param name="marker_lifetime" value="0.5"/>
        <param name="box_max_size" value="9999999"/>
    </node>
</launch>
